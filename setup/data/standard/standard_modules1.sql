INSERT INTO !PREFIX!_mod VALUES('1', '1', 'CL Main Navi', 'Navigation', 'none', '', '', '?><?php\n\n?><?php', '<?php\r\n\r\n/**\r\n * Modul-Output: ConLite Main Navigation\r\n * \r\n * @package ConLite\r\n * @subpackage Module\r\n * @version $Rev$\r\n * @author Ortwin Pinke <ortwin.pinke@conlite.org>\r\n * @license http://www.gnu.de/documents/gpl.de.html GPL v3\r\n * @link http://conlite.org ConLite Portal\r\n * \r\n * \r\n * $Id$\r\n */\r\ndefined("CON_FRAMEWORK") || die(''Illegal call: Missing framework initialization - request aborted.'');\r\n$oTpl = new Template();\r\n$oTpl->reset();\r\ncInclude(''frontend'', ''includes/Util/Modules/Contenido_NavMain_Util.class.php'');\r\n\r\n$iStartIdcat = getEffectiveSetting(''navigation'', ''idcat-home'', 1);\r\n$iSelectedDepth = getEffectiveSetting(''navigation'', ''level-depth'', 3);\r\n$bWithFeLogin = boolval(getEffectiveSetting(''navigation'', ''with-fe-login'', FALSE));\r\n\r\nfunction clBuildNavArray(Contenido_FrontendNavigation &$oNav, $iStartIdcat) {\r\n    $aNavArray = array();\r\n    $aCategories = $oNav->getSubCategories($iStartIdcat, false, true, 1);\r\n    $oCatLangCol = new cApiCategoryLanguageCollection();\r\n\r\n    if (count($aCategories) > 0) {\r\n        $i = 0;\r\n        foreach ($aCategories as $iCategory) {\r\n            $oNav->setRootCat($iCategory);\r\n            $aNavArray[$i][''idcat''] = $iCategory;\r\n            // get catname\r\n            /* @var $oCatLang cApiCategoryLanguage */\r\n            $oCatLangCol->setWhere(''idcat'', $iCategory);\r\n            $oCatLangCol->setWhere(''idlang'', cRegistry::getLanguageId());\r\n            $oCatLangCol->query();\r\n            $oCatLang = $oCatLangCol->next();\r\n            //print_r($oCatLang);\r\n            if ($oCatLang->isLoaded()) {\r\n                $aNavArray[$i][''name''] = $oCatLang->getField(''name'');\r\n                $aNavArray[$i][''urlname''] = $oCatLang->getField(''urlname'');\r\n            }\r\n\r\n            $aNavArray[$i][''subnav''] = clBuildNavArray($oNav, $iCategory);\r\n            $i++;\r\n        }\r\n    }\r\n\r\n    unset($oCatLangCol);\r\n    return $aNavArray;\r\n}\r\n\r\nfunction clBuildNavList($aNavArray, $aBreadcrumb, $iLevel = 0) {\r\n    global $auth, $bWithFeLogin;\r\n    $sNavList = '''';\r\n    if (is_array($aNavArray) && !empty($aNavArray)) {\r\n        if ($iLevel == 0) {\r\n            $sNavList .= ''<ul class="srt-menu" id="menu-main-navigation">'';\r\n        } else {\r\n            $sNavList .= ''<ul>'';\r\n        }\r\n        foreach ($aNavArray as $aNavEntry) {\r\n            if (in_array($aNavEntry[''idcat''], $aBreadcrumb)) {\r\n                $sNavList .= ''<li class="current">'';\r\n            } else {\r\n                $sNavList .= ''<li>'';\r\n            }\r\n            $sNavList .= ''<a href="#">'' . $aNavEntry[''name''] . ''</a>'';\r\n            if (!empty($aNavEntry[''subnav''])) {\r\n                $sNavList .= clBuildNavList($aNavEntry[''subnav''], $aBreadcrumb, $iLevel + 1);\r\n            }\r\n            $sNavList .= ''</li>'';\r\n        }\r\n        // add user login\r\n        if ($iLevel == 0 && $bWithFeLogin) {\r\n            $sLoginForm = "";\r\n            $oTpl = new Template();\r\n            if ($auth->auth["uid"] == "nobody") {\r\n                $sTargetIdcat = getEffectiveSetting(''login'', ''idcat'', cRegistry::getCategoryId());\r\n                $sTargetIdart = getEffectiveSetting(''login'', ''idart'', cRegistry::getArticleId());\r\n                $sFormAction = ''front_content.php?idcat='' . $sTargetIdcat . ''&amp;idart='' . $sTargetIdart;\r\n\r\n                $oTpl->set(''s'', ''headline'', mi18n("Geschlossener Bereich Login"));\r\n                $oTpl->set(''s'', ''form_action'', $sFormAction);\r\n                $oTpl->set(''s'', ''label_name'', mi18n("user"));\r\n                $oTpl->set(''s'', ''label_pass'', mi18n("pass"));\r\n                $oTpl->set(''s'', ''label_login'', mi18n("send"));\r\n                $sLoginForm .= $oTpl->generate(''cl_login_form.html'', TRUE);\r\n            } else {\r\n                \r\n            }\r\n\r\n            $sNavList .= ''<li>'' . $sLoginForm . ''</li>'';\r\n        }\r\n        $sNavList .= ''</ul>'';\r\n    }\r\n\r\n\r\n    return $sNavList;\r\n}\r\n\r\nif ($iStartIdcat > 0) {\r\n    $oFeNavBreadcrumb = new Contenido_FrontendNavigation_Breadcrumb(\r\n            cRegistry::getDb()\r\n            , cRegistry::getConfig()\r\n            , cRegistry::getClientId()\r\n            , cRegistry::getLanguageId()\r\n            , cRegistry::getClientConfig()\r\n            );\r\n\r\n    $aBreadcrumb = $oFeNavBreadcrumb->getAsArray(cRegistry::getCategoryId(), $iStartIdcat);\r\n\r\n    $oFeNav = new Contenido_FrontendNavigation(\r\n            cRegistry::getDb(),\r\n            cRegistry::getConfig(),\r\n            cRegistry::getClientId(),\r\n            cRegistry::getLanguageId(),\r\n            cRegistry::getClientConfig()\r\n            );\r\n    $oFeNav->setAuth($auth);\r\n    $oFeNav->setRootCat($iStartIdcat);\r\n\r\n    $aNavArray = clBuildNavArray($oFeNav, $iStartIdcat);\r\n\r\n    echo ''<div class="menu-toggle">MENU</div>'';\r\n    echo clBuildNavList($aNavArray, $aBreadcrumb);\r\n} else {\r\n    if(cRegistry::isBackendEditMode()) {\r\n        echo ''<p>Navigation not configured correctly.</p>'';\r\n    }\r\n}\r\n?>', '', '0', '', '', '48a365b4ce1e322a55ae9017f3daf0c0', '2015-06-22 14:35:54', '2017-08-11 12:41:45');
INSERT INTO !PREFIX!_mod VALUES('4', '1', 'CL Flex Slider', 'media', 'none', '', '', '    ?><?php\n    cInclude("frontend", "includes/class.input.helper.php");\n     \n    $aModCfg = array(\n        ''folder'' => "CMS_VALUE[0]",\n       \n    );\n     \n    $aCfgClient = cRegistry::getClientConfig(cRegistry::getClientId());\n    $path = realpath($aCfgClient[''upl''][''path'']);\n    $aFolders = array();\n    $aFolders[] = mi18n("-- Select Folder --");\n    $objects = new RecursiveIteratorIterator(new RecursiveDirectoryIterator($path), RecursiveIteratorIterator::SELF_FIRST);\n    foreach($objects as $name=>$object) {\n        if(is_dir($name)) {\n            if(in_array(basename($name), array(''.'',''..''))) {\n                continue;\n            }\n            $folder = str_replace($path.DIRECTORY_SEPARATOR, "", $name);\n            $aFolders[$folder] = $folder;\n        }\n    }\n    asort($aFolders);\n    //print_r($aFolders);\n     \n    $oFolderSelect = new cHTMLSelectElement("CMS_VAR[0]");\n    $oFolderSelect->autoFill($aFolders);\n    $oFolderSelect->setDefault($aModCfg[''folder'']);\n     \n    $oCfgTable = new UI_Config_Table();\n     \n    $oCfgTable->setCell(0, 0, mi18n("Select Image Folder"));\n    $oCfgTable->setCell(0, 1, $oFolderSelect->render());\n     \n    $oCfgTable->render(true);\n    ?><?php', '<?php\n$aOptionsSet = array(\n    ''folder'' => "CMS_VALUE[0]",\n    ''show_caption'' => "CMS_VALUE[10]",\n    ''img_width'' => "CMS_VALUE[20]",\n    ''img_height'' => "CMS_VALUE[21]",\n    ''thumb_width'' => "CMS_VALUE[30]",\n    ''thumb_height'' => "CMS_VALUE[31]",\n);\n\n$aOptionsSet[''show_caption''] = ($aOptionsSet[''show_caption''] == ''true'')?TRUE:FALSE;\n\n$aDefaultArray = array(   \n    ''img_width'' => "500",\n    ''img_height'' => "300",\n    ''img_quality''=> 30,\n    ''thumb_width'' => "50",\n    ''thumb_height'' => "50",\n);\n\n$aModCfg = array_merge($aOptionsSet, $aDefaultArray);\n\nif (!empty($aModCfg[''folder''])) {\n    $oUplColl = new cApiUploadCollection();\n    $oUplColl->setWhere(''dirname'', $aModCfg[''folder''], ''like'');\n    $oUplColl->link(''cApiUploadMetaCollection'');\n    $oUplColl->query();\n\n    $aItems = array();\n    /* @var $oUpl cApiUpload */\n    while ($oUpl = $oUplColl->next()) {\n        $aItems[] = $oUpl->toArray();\n    }\n\n    $oTpl = new Template();\n\n    if (count($aItems) > 0) {\n        $aClientCfg = cRegistry::getClientConfig(cRegistry::getClientId());\n\n        foreach ($aItems as $iKey => $aItem) {\n            $sOrgImgPath = $aClientCfg[''upl''][''frontendpath''] . $aItem[''dirname''] . $aItem[''filename''];\n            if (file_exists($sOrgImgPath)) {\n                // generate thumb\n                $sThumbPath = capiImgScale($sOrgImgPath, $aModCfg[''thumb_width''], $aModCfg[''thumb_height'']);\n                // generate scaled image with heigh quality\n                $sImgPath = capiImgScale($sOrgImgPath, $aModCfg[''img_width''], $aModCfg[''img_height''], NULL, NULL, 0, TRUE, $aModCfg[''img_quality'']);\n\n                $oTpl->set(''d'', ''IMG_THUMB'', $sThumbPath);\n                $oTpl->set(''d'', ''IMG'', $sImgPath);\n                if($aOptionsSet[''show_caption'']) {\n                    $oTpl->set(''d'', ''IMG_CAPTION'', $aItem[''description'']);\n                } else {\n                    $oTpl->set(''d'', ''IMG_CAPTION'', '''');\n                }\n                $oTpl->next();\n            }\n        }\n        $oTpl->generate("cl_flex_slider.html");\n    }\n/*\n    echo ''<pre>'';\n    print_r($aModCfg);\n    print_r($aItems);\n    print_r($aClientCfg);\n    echo ''</pre>'';\n * \n */\n}\n?>', '', '0', '', '', '48a365b4ce1e322a55ae9017f3daf0c0', '2016-05-23 14:42:01', '2017-08-11 12:41:45');
INSERT INTO !PREFIX!_mod VALUES('5', '1', 'CL Portal Buttons', 'navigation', 'none', '', '', '?><?php\n\n?><?php', '<?php\n$aButtons = array(\n    ''forum'' => array(\n        ''href'' => ''http://forum.conlite.org'',\n        ''label''=> mi18n("CL-User-Forum")\n    ),\n    ''faq'' => array(\n        ''href'' => ''http://faq.conlite.org'',\n        ''label''=> mi18n("CL-FAQ")\n    ),\n    ''bugtracker'' => array(\n        ''href'' => ''http://dev.conlite.org/tickets'',\n        ''label''=> mi18n("CL-Bugtracker")\n    )\n);\n\n$oLink = new cHTMLLink();\n$oLink->setClass("buttonlink");\n\nforeach($aButtons as $aButton) {\n    $oLink->setAttribute(''title'', mi18n("to")." ".$aButton[''label'']);\n    $oLink->setLink($aButton[''href'']);\n    $oLink->setContent($aButton[''label'']);\n    echo $oLink->render();\n    $oLink->advanceID();\n}\nunset($oLink);\n?>', '', '0', '', '', '48a365b4ce1e322a55ae9017f3daf0c0', '2016-05-23 14:55:40', '2017-08-11 12:41:45');
INSERT INTO !PREFIX!_mod VALUES('6', '1', 'CL Headline', 'content', 'none', '', '', '?><?php\n\n?><?php', '<?php\n/**\n * Modul-Output: ConLite Headline\n * \n * @package ConLite\n * @subpackage Module\n * @version $Rev$\n * @author Ortwin Pinke <ortwin.pinke@conlite.org>\n * @license http://www.gnu.de/documents/gpl.de.html GPL v3\n * @link http://conlite.org ConLite Portal\n * \n * \n * $Id$\n */\nif (!isset($oTpl) || !is_object($oTpl)) {\n    $oTpl = new Template();\n}\n\n$sText = "CMS_HTMLHEAD[1]";\n$sTemplate = "headline_h1.html";\n\n$oTpl->reset();\nif (cRegistry::isBackendEditMode()) {\n    $oTpl->set(''s'', ''HEADLINE'', $sText);\n    $oTpl->generate($sTemplate);\n} else {\n    if(!empty($sText)) {\n        $oTpl->set(''s'', ''HEADLINE'', strip_tags($sText));\n        $oTpl->generate($sTemplate);\n    }\n}\n?>', '', '0', '', '', '48a365b4ce1e322a55ae9017f3daf0c0', '2016-05-23 15:01:13', '2017-08-11 12:41:45');
INSERT INTO !PREFIX!_mod VALUES('7', '1', 'CL Subheadline', 'content', 'none', '', '', '?><?php\n\n?><?php', '<?php\n/**\n * Modul-Output: ConLite SubHeadline\n * \n * @package ConLite\n * @subpackage Module\n * @version $Rev$\n * @author Ortwin Pinke <ortwin.pinke@conlite.org>\n * @license http://www.gnu.de/documents/gpl.de.html GPL v3\n * @link http://conlite.org ConLite Portal\n * \n * \n * $Id$\n */\nif (!isset($oTpl) || !is_object($oTpl)) {\n    $oTpl = new Template();\n}\n\n$sText = "CMS_HTMLHEAD[2]";\n$sTemplate = "subheadline_h2.html";\n\n$oTpl->reset();\nif (cRegistry::isBackendEditMode()) {\n    $oTpl->set(''s'', ''SUBHEADLINE'', $sText);\n    $oTpl->generate($sTemplate);\n} else {\n    if(!empty($sText)) {\n        $oTpl->set(''s'', ''SUBHEADLINE'', strip_tags($sText));\n        $oTpl->generate($sTemplate);\n    }\n}\n?>', '', '0', '', '', '48a365b4ce1e322a55ae9017f3daf0c0', '2016-05-23 15:01:51', '2017-08-11 12:41:45');
INSERT INTO !PREFIX!_mod VALUES('8', '1', 'CL Contact Form', 'form', 'none', '', '', '?><?php\n\n?><?php', '<?php\necho ''Alles wird \\''Gut\\'''';\n?>', '', '0', '', '', '48a365b4ce1e322a55ae9017f3daf0c0', '2016-05-23 15:02:21', '2017-08-11 12:41:45');
INSERT INTO !PREFIX!_mod VALUES('9', '1', 'CL Newsletter Subscription', 'form', 'none', '', '', '?><?php\n\n?><?php', '<?php\n\n?>', '', '0', '', '', '48a365b4ce1e322a55ae9017f3daf0c0', '2016-05-23 15:03:10', '2017-08-11 12:41:45');
INSERT INTO !PREFIX!_mod VALUES('10', '1', 'CL Newsletter Handler', 'apps', 'none', '', '', '?><?php\n\n?><?php', '<?php\n\n?>', '', '0', '', '', '48a365b4ce1e322a55ae9017f3daf0c0', '2016-05-23 15:04:05', '2017-08-11 12:41:45');
INSERT INTO !PREFIX!_mod VALUES('11', '1', 'CL HTML Text', 'content', 'none', '', '', '?><?php\n\n?><?php', '<?php\n/**\n * Modul-Output: ConLite Text\n * \n * @package ConLite\n * @subpackage Module\n * @version $Rev$\n * @author Ortwin Pinke <ortwin.pinke@conlite.org>\n * @license http://www.gnu.de/documents/gpl.de.html GPL v3\n * @link http://conlite.org ConLite Portal\n * \n * \n * $Id$\n */\nif (!isset($oTpl) || !is_object($oTpl)) {\n    $oTpl = new Template();\n}\n\n$oTpl->reset();\n$oTpl->set(''s'', ''text'', "CMS_HTML[1]");\n$oTpl->generate(''text_html.html'');\n?>', '', '0', '', '', '48a365b4ce1e322a55ae9017f3daf0c0', '2016-05-23 15:29:56', '2017-08-11 12:41:45');
INSERT INTO !PREFIX!_mod VALUES('12', '1', 'CL Cookie Directive', 'navigation', 'none', '', '', '?><?php\n\n?><?php', '<?php\n/**\n * Modul-Output: ConLite Cookie Directive\n * \n * @package ConLite\n * @subpackage Module\n * @version $Rev$\n * @author Ortwin Pinke <ortwin.pinke@conlite.org>\n * @license http://www.gnu.de/documents/gpl.de.html GPL v3\n * @link http://conlite.org ConLite Portal\n * \n * \n * $Id$\n */\n\ndefined("CON_FRAMEWORK") || die(''Illegal call: Missing framework initialization - request aborted.'');\n\n$aCfgMod = array(\n    ''debug'' => FALSE\n);\n\n$aCookieOpt = array(\n    ''explicitConsent'' => ''false'',\n    ''position'' => ''top'',\n    ''message'' => mi18n("This site uses cookies. Some of the cookies we use are essential for parts of the site to operate and have already been set."),\n    ''message'' => mi18n("We have placed cookies on your computer to help make this website better."),\n// Messages\n    ''multipleCookieScriptBeginningLabel'' => mi18n("We use"),\n    ''and'' => '' ''.mi18n("and").'' '',\n    ''multipleCookieScriptEndLabel'' => '' ''.mi18n("scripts, which all set cookies.").'' '',\n    ''singleCookieScriptBeginningLabel'' => ''!!! ''.mi18n("We use a").'' '',\n    ''singleCookieScriptEndLabel'' => '' ''.mi18n("script which sets cookies."),\n    ''explicitCookieDeletionWarning'' => mi18n("You may delete and block all cookies from this site, but parts of the site will not work."),\n    ''explicitFindOutMore'' => mi18n("To find out more about cookies on this website, see our"),\n    ''privacyPolicyLinkText'' => '' ''.mi18n("privacy policy"),\n    ''explicitCheckboxLabel'' => mi18n("You must tick the \\"I accept cookies from this site\\" box to accept"),\n    ''explicitCookieAcceptanceLabel'' => mi18n("I accept cookies from this site"),\n    ''explicitCookieAcceptButtonText'' => mi18n("Continue"),\n    ''impliedDisclosureText'' => '' ''.mi18n("More details can be found in our"),\n    ''impliedSubmitText'' => mi18n("Do not show this message again")\n);\n?>\n<script type="text/javascript">\n    window.onload = function () {\n        console.log($.fn.jquery);\n\n        /* Cookies Directive - The rewrite. Now a jQuery plugin\n         * Version: 2.0.1\n         * Author: Ollie Phillips\n         * 24 October 2013\n         */\n\n        ;\n        (function ($) {\n            $.cookiesDirective = function (options) {\n\n                // Default Cookies Directive Settings\n                var settings = $.extend({\n                    //Options\n                    explicitConsent: true,\n                    position: ''top'',\n                    duration: 10,\n                    limit: 0,\n                    message: null,\n                    cookieScripts: null,\n                    privacyPolicyUri: ''privacy.html'',\n                    inlineAction: false,\n                    scriptWrapper: function () {},\n                    // Styling\n                    fontFamily: ''helvetica'',\n                    fontColor: ''#FFFFFF'',\n                    fontSize: ''13px'',\n                    backgroundColor: ''#000000'',\n                    backgroundOpacity: ''80'',\n                    linkColor: ''#CA0000'',\n                    // Messages\n                    multipleCookieScriptBeginningLabel: '' We use '',\n                    and: '' and '',\n                    multipleCookieScriptEndLabel: '' scripts, which all set cookies. '',\n                    singleCookieScriptBeginningLabel: '' We use a '',\n                    singleCookieScriptEndLabel: '' script which sets cookies.'',\n                    explicitCookieDeletionWarning: ''You may delete and block all cookies from this site, but parts of the site will not work.'',\n                    explicitFindOutMore: ''To find out more about cookies on this website, see our'',\n                    privacyPolicyLinkText: '' privacy policy'',\n                    explicitCheckboxLabel: ''You must tick the "I accept cookies from this site" box to accept'',\n                    explicitCookieAcceptanceLabel: ''I accept cookies from this site'',\n                    explicitCookieAcceptButtonText: ''Continue'',\n                    impliedDisclosureText: '' More details can be found in our'',\n                    impliedSubmitText: ''Do not show this message again''\n                }, options);\n\n                // Perform consent checks\n                if (!getCookie(''cookiesDirective'')) {\n                    if (settings.limit > 0) {\n                        // Display limit in force, record the view\n                        if (!getCookie(''cookiesDisclosureCount'')) {\n                            setCookie(''cookiesDisclosureCount'', 1, 1);\n                        } else {\n                            var disclosureCount = getCookie(''cookiesDisclosureCount'');\n                            disclosureCount++;\n                            setCookie(''cookiesDisclosureCount'', disclosureCount, 1);\n                        }\n\n                        // Have we reached the display limit, if not make disclosure\n                        if (settings.limit >= getCookie(''cookiesDisclosureCount'')) {\n                            disclosure(settings);\n                        }\n                    } else {\n                        // No display limit\n                        disclosure(settings);\n                    }\n\n                    // If we don''t require explicit consent, load up our script wrapping function\n                    if (!settings.explicitConsent) {\n                        settings.scriptWrapper.call();\n                    }\n                } else {\n                    // Cookies accepted, load script wrapping function\n                    settings.scriptWrapper.call();\n                }\n            };\n\n            // Used to load external javascript files into the DOM\n            $.cookiesDirective.loadScript = function (options) {\n                var settings = $.extend({\n                    uri: '''',\n                    appendTo: ''body''\n                }, options);\n\n                var elementId = String(settings.appendTo);\n                var sA = document.createElement("script");\n                sA.src = settings.uri;\n                sA.type = "text/javascript";\n                sA.onload = sA.onreadystatechange = function () {\n                    if ((!sA.readyState || sA.readyState == "loaded" || sA.readyState == "complete")) {\n                        return;\n                    }\n                }\n                switch (settings.appendTo) {\n                    case ''head'':\n                        $(''head'').append(sA);\n                        break;\n                    case ''body'':\n                        $(''body'').append(sA);\n                        break;\n                    default:\n                        $(''#'' + elementId).append(sA);\n                }\n            }\n\n            // Helper scripts\n            // Get cookie\n            var getCookie = function (name) {\n                var nameEQ = name + "=";\n                var ca = document.cookie.split('';'');\n                for (var i = 0; i < ca.length; i++) {\n                    var c = ca[i];\n                    while (c.charAt(0) == '' '')\n                        c = c.substring(1, c.length);\n                    if (c.indexOf(nameEQ) == 0)\n                        return c.substring(nameEQ.length, c.length);\n                }\n                return null;\n            }\n\n            // Set cookie\n            var setCookie = function (name, value, days) {\n                if (days) {\n                    var date = new Date();\n                    date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));\n                    var expires = "; expires=" + date.toGMTString();\n                } else\n                    var expires = "";\n                document.cookie = name + "=" + value + expires + "; path=/";\n            }\n\n            // Detect IE < 9\n            var checkIE = function () {\n                var version;\n                if (navigator.appName == ''Microsoft Internet Explorer'') {\n                    var ua = navigator.userAgent;\n                    var re = new RegExp("MSIE ([0-9]{1,}[\\.0-9]{0,})");\n                    if (re.exec(ua) != null) {\n                        version = parseFloat(RegExp.$1);\n                    }\n                    if (version <= 8.0) {\n                        return true;\n                    } else {\n                        if (version == 9.0) {\n                            if (document.compatMode == "BackCompat") {\n                                // IE9 in quirks mode won''t run the script properly, set to emulate IE8	\n                                var mA = document.createElement("meta");\n                                mA.content = "IE=EmulateIE8";\n                                document.getElementsByTagName(''head'')[0].appendChild(mA);\n                                return true;\n                            } else {\n                                return false;\n                            }\n                        }\n                        return false;\n                    }\n                } else {\n                    return false;\n                }\n            }\n\n            // Disclosure routines\n            var disclosure = function (options) {\n                var settings = options;\n                settings.css = ''fixed'';\n\n                // IE 9 and lower has issues with position:fixed, either out the box or in compatibility mode - fix that\n                if (checkIE()) {\n                    settings.position = ''top'';\n                    settings.css = ''absolute'';\n                }\n\n                // Any cookie setting scripts to disclose\n                var scriptsDisclosure = '''';\n                if (settings.cookieScripts) {\n                    var scripts = settings.cookieScripts.split('','');\n                    var scriptsCount = scripts.length;\n                    var scriptDisclosureTxt = '''';\n                    if (scriptsCount > 1) {\n                        for (var t = 0; t < scriptsCount - 1; t++) {\n                            scriptDisclosureTxt += scripts[t] + '', '';\n                        }\n\n                        scriptsDisclosure = settings.multipleCookieScriptBeginningLabel + scriptDisclosureTxt.substring(0, scriptDisclosureTxt.length - 2) + settings.and + scripts[scriptsCount - 1] + settings.multipleCookieScriptEndLabel;\n                    } else {\n                        scriptsDisclosure = setting.singleCookieScriptBeginningLabel + scripts[0] + settings.singleCookieScriptEndLabel;\n                    }\n                }\n\n                // Create overlay, vary the disclosure based on explicit/implied consent\n                // Set our disclosure/message if one not supplied\n                var html = '''';\n                html += ''<div id="epd">'';\n                html += ''<div id="cookiesdirective" style="position:'' + settings.css + '';'' + settings.position + '':-300px;left:0px;width:100%;''\n                html += ''height:auto;background:'' + settings.backgroundColor + '';opacity:.'' + settings.backgroundOpacity + '';'';\n                html += ''-ms-filter: “alpha(opacity='' + settings.backgroundOpacity + '')”; filter: alpha(opacity='' + settings.backgroundOpacity + '');'';\n                html += ''-khtml-opacity: .'' + settings.backgroundOpacity + ''; -moz-opacity: .'' + settings.backgroundOpacity + '';'';\n                html += ''color:'' + settings.fontColor + '';font-family:'' + settings.fontFamily + '';font-size:'' + settings.fontSize + '';'';\n                html += ''text-align:center;z-index:1000;">'';\n                html += ''<div style="position:relative;height:auto;width:90%;padding:10px;margin-left:auto;margin-right:auto;">'';\n\n                if (!settings.message) {\n                    if (settings.explicitConsent) {\n                        // Explicit consent message\n                        settings.message = ''This site uses cookies. Some of the cookies we '';\n                        settings.message += ''use are essential for parts of the site to operate and have already been set.'';\n                    } else {\n                        // Implied consent message\n                        settings.message = ''We have placed cookies on your computer to help make this website better.'';\n                    }\n                }\n                html += settings.message;\n\n                // Build the rest of the disclosure for implied and explicit consent\n                if (settings.explicitConsent) {\n                    // Explicit consent disclosure\n                    html += scriptsDisclosure + settings.explicitCookieDeletionWarning;\n                    html += settings.explicitFindOutMore + ''<a style="color:'' + settings.linkColor + '';font-weight:bold;'';\n                    html += ''font-family:'' + settings.fontFamily + '';font-size:'' + settings.fontSize + '';" href="'' + settings.privacyPolicyUri + ''">'' + settings.privacyPolicyLinkText + ''</a>.'';\n                    html += ''<div id="epdnotick" style="color:#ca0000;display:none;margin:2px;"><span style="background:#cecece;padding:2px;">'' + settings.explicitCheckboxLabel + ''</span></div>''\n                    html += ''<div style="margin-top:5px;'';\n                    if (settings.inlineAction) {\n                        html += ''display:inline-block;margin-left:5px'';\n                    }\n                    html += ''">'' + settings.explicitCookieAcceptanceLabel + ''<input type="checkbox" name="epdagree" id="epdagree" />&nbsp;'';\n                    html += ''<input type="submit" name="explicitsubmit" id="explicitsubmit" value="'' + settings.explicitCookieAcceptButtonText + ''"/><br/></div></div>'';\n\n                } else {\n                    // Implied consent disclosure\n                    html += scriptsDisclosure + settings.impliedDisclosureText + '' <a style="color:'' + settings.linkColor + '';'';\n                    html += ''font-weight:bold;font-family:'' + settings.fontFamily + '';font-size:'' + settings.fontSize + '';" href="'' + settings.privacyPolicyUri + ''">'' + settings.privacyPolicyLinkText + ''</a>.'';\n                    html += ''<div style="margin-top:5px;'';\n                    if (settings.inlineAction) {\n                        html += ''display:inline-block;margin-left:5px'';\n                    }\n                    html += ''"><input type="submit" name="impliedsubmit" id="impliedsubmit" value="'' + settings.impliedSubmitText + ''"/></div></div>'';\n                }\n                html += ''</div></div>'';\n                $(''body'').append(html);\n\n                // Serve the disclosure, and be smarter about branching\n                var dp = settings.position.toLowerCase();\n                if (dp != ''top'' && dp != ''bottom'') {\n                    dp = ''top'';\n                }\n                var opts = new Array();\n                if (dp == ''top'') {\n                    opts[''in''] = {''top'': ''0''};\n                    opts[''out''] = {''top'': ''-300''};\n                } else {\n                    opts[''in''] = {''bottom'': ''0''};\n                    opts[''out''] = {''bottom'': ''-300''};\n                }\n\n                // Start animation\n                $(''#cookiesdirective'').animate(opts[''in''], 1000, function () {\n                    // Set event handlers depending on type of disclosure\n                    if (settings.explicitConsent) {\n                        // Explicit, need to check a box and click a button\n                        $(''#explicitsubmit'').click(function () {\n                            if ($(''#epdagree'').is('':checked'')) {\n                                // Set a cookie to prevent this being displayed again\n                                setCookie(''cookiesDirective'', 1, 365);\n                                // Close the overlay\n                                $(''#cookiesdirective'').animate(opts[''out''], 1000, function () {\n                                    // Remove the elements from the DOM and reload page\n                                    $(''#cookiesdirective'').remove();\n                                    location.reload(true);\n                                });\n                            } else {\n                                // We need the box checked we want "explicit consent", display message\n                                $(''#epdnotick'').css(''display'', ''block'');\n                            }\n                        });\n                    } else {\n                        // Implied consent, just a button to close it\n                        $(''#impliedsubmit'').click(function () {\n                            // Set a cookie to prevent this being displayed again\n                            setCookie(''cookiesDirective'', 1, 365);\n                            // Close the overlay\n                            $(''#cookiesdirective'').animate(opts[''out''], 1000, function () {\n                                // Remove the elements from the DOM and reload page\n                                $(''#cookiesdirective'').remove();\n                            });\n                        });\n                    }\n\n                    // Set a timer to remove the warning after ''settings.duration'' seconds\n                    setTimeout(function () {\n                        $(''#cookiesdirective'').animate({\n                            opacity: ''0''\n                        }, 2000, function () {\n                            $(''#cookiesdirective'').css(dp, ''-300px'');\n                        });\n                    }, settings.duration * 1000);\n                });\n            }\n        })(jQuery);\n\n\n\n\n        $.cookiesDirective(<?php\nif (!empty($aCookieOpt)) {\n    $iCnt = count($aCookieOpt);\n    $iLoop = 1;\n    echo ''{'' . "\\n";\n    foreach ($aCookieOpt as $key => $value) {\n        if ($value == "false" || $value == ''true'') {\n            $sClip = '''';\n        } else {\n            $sClip = ''\\'''';\n        }\n        $param = $key . '': '';\n        $param .= $sClip . $value . $sClip;\n        if ($iCnt > 1 && $iLoop < $iCnt) {\n            $param .= '','';\n        }\n        echo "\\t\\t" . $param . "\\n";\n        $iLoop++;\n    }\n    echo "\\t" . ''}'';\n}\n?>);\n    };\n</script>', '', '0', '', '', '48a365b4ce1e322a55ae9017f3daf0c0', '2016-07-18 15:20:44', '2017-08-11 12:41:45');
INSERT INTO !PREFIX!_mod VALUES('13', '1', 'CL Social Media Links', 'navigation', 'none', '', '', '?><?php\n\n?><?php', '<?php\n/**\n * Modul-Output: ConLite Social Media Links\n * \n * @package ConLite\n * @subpackage Module\n * @version $Rev$\n * @author Ortwin Pinke <ortwin.pinke@conlite.org>\n * @license http://www.gnu.de/documents/gpl.de.html GPL v3\n * @link http://conlite.org ConLite Portal\n * \n * \n * $Id$\n */\n\ndefined("CON_FRAMEWORK") || die(''Illegal call: Missing framework initialization - request aborted.'');\n\n$aCfgMod = array(\n    ''debug'' => FALSE\n);\n\n$aSupportedSocialNets = array(\n    ''xing'',\n    ''twitter'',\n    ''google-plus'',\n    ''pinterest'',\n    ''youtube'',\n    ''flickr'',\n    ''rss'',\n    ''vimeo'',\n    ''dribble'',\n    ''linkedin''\n);\n\n$aLinks = array(\n    ''twitter'' => array(\n        ''href'' => ''https://twitter.com/conlite_cms'',\n        ''label'' => mi18n("Meet us on Twitter")\n    ),\n    ''xing'' => array(\n        ''href'' => ''https://www.xing.com/communities/groups/conlite-the-lightweight-and-userfriendly-cms-cec9-1045289'',\n        ''label'' => mi18n("Link in Modul-Output")\n    )\n);\n\n$aUserLinks = getEffectiveSettingsByType("social-media-links");\n$aUserLinksArray = array();\nif (count($aUserLinks) > 0) {\n    foreach ($aUserLinks as $key => $value) {\n        $sKey = strtolower(trim($key));\n        if (in_array($sKey, $aSupportedSocialNets)) {\n            $aValues = explode("::", $value);\n            $sLabel = (isset($aValues[1]) && !empty($aValues[1])) ? $aValues[1] : "";\n            $aUserLinksArray[$sKey] = array(\n                ''href'' => $aValues[0],\n                ''label'' => $sLabel\n            );\n        }\n    }\n}\n\n$aLinks = array_merge($aLinks, $aUserLinksArray);\n\n$oTpl = new Template();\n\nforeach ($aLinks as $sName => $aEntry) {\n    $oTpl->set(''d'', ''SM_CSS_WHAT'', $sName);\n    $oTpl->set(''d'', ''SM_HREF'', $aEntry[''href'']);\n    $oTpl->set(''d'', ''SM_LABEL'', $aEntry[''label'']);\n    $oTpl->next();\n}\n\n$oTpl->generate("cl_social_media_links.html");\n?>', '', '0', '', '', '48a365b4ce1e322a55ae9017f3daf0c0', '2016-07-19 12:54:20', '2017-08-11 12:41:45');
INSERT INTO !PREFIX!_mod VALUES('15', '1', 'CL Ratings', 'community', 'none', '<Ihre Modulbeschreibung>\r\n\r\nAutor:\r\nVersion:', '', '?><?php\n\n$Showroomoption="CMS_VALUE[9922]";\n\necho ''<table cellspacing="0" cellpadding="2" border="0" width="100%"><tr><td><strong class="red">Bewertung</strong><br /><br />''."\\n";\nif ($Showroomoption=="auswahl") {\n   echo ''<input type="radio" name="CMS_VAR[9922]" value="auswahl" checked>''.mi18n("Bewertungen f&uuml;r den Artikel zulassen").''&nbsp; <input type="radio" name="CMS_VAR[9922]" value="nichts">''.mi18n("Keine Bewertungen f&uuml;r den Artikel zulassen").'''';\n} else {\n   echo ''<input type="radio" name="CMS_VAR[9922]" value="auswahl">''.mi18n("Bewertungen f&uuml;r den Artikel zulassen").''&nbsp; <input type="radio" name="CMS_VAR[9922]" value="nichts" checked>''.mi18n("Keine Bewertungen f&uuml;r den Artikel zulassen").'''';\n}\necho ''</td></tr>''."\\n";\necho ''</table>''."\\n";\n?><?php', '<?php\nif ($edit) {\necho "<br /><div class=\\"beinfo beinfoicon\\" style=\\"cursor:help;\\"><span>Sie k&ouml;nnen <strong>Bewertungen</strong> f&uuml;r der Artikel zulassen. Dafür wechseln Sie in die Konfiguration des Artikels und w&auml;hlen Sie &quot;Bewertungen f&uuml;r den Artikel zulassen&quot;.</span></div><hr class=\\"beclear\\"/>";\n}\n?>\n\n<?php\n\n    ###############################\n    ### Klasse Artikelbewertung ###\n    ###############################\n\n    class wtArtikelbewertung {\n\n       private $_oArticle       = null;\n       private $_iSperrzeit    = null;\n       private $_sRemoteAddr    = null;\n       private $_iTimestamp    = null;\n       private $_iLastRate    = null;\n       private $_iMaxSterne    = null;\n\n       public function wtArtikelbewertung($iSperrzeit, $iMaxSterne) {\n          $this->_seArticle();\n          $this->_setSperrzeit($iSperrzeit);\n          $this->_setRemoteAddr($_SERVER[''REMOTE_ADDR'']);\n          $this->_setTimestamp();\n          $this->_setMaxSterne($iMaxSterne);\n       }\n\n       private function _seArticle() {\n          global $idart;\n\n          $this->_oArticle = new cApiArticle($idart);\n       }\n\n       private function _getArticle() {\n          return $this->_oArticle;\n       }\n\n       private function _setSperrzeit($iSperrzeit) {\n          $this->_iSperrzeit = $iSperrzeit;\n       }\n\n       private function _getSperrzeit() {\n          return $this->_iSperrzeit;\n       }\n\n       private function _setRemoteAddr($sRemoteAddr) {\n          $this->_sRemoteAddr = $sRemoteAddr;\n       }\n\n       private function _getRemoteAddr() {\n          return $this->_sRemoteAddr;\n       }\n\n       private function _setTimestamp() {\n          $this->_iTimestamp = time();\n       }\n\n       private function _getTimestamp() {\n          return $this->_iTimestamp;\n       }\n\n       private function _setBewerter() {\n          $aBewerter = $this->_getBewerter();\n\n          $aBewerter[$this->_getRemoteAddr()] = $this->_getTimestamp();\n\n          $this->_getArticle()->setProperty(''Artikelbewertung'', ''bewerter'', base64_encode(serialize($aBewerter)));\n       }\n\n       private function _getBewerter() {\n          return unserialize(base64_decode($this->_getArticle()->getProperty(''Artikelbewertung'', ''bewerter'')));\n       }\n\n       private function _setSterne($iSterne) {\n          $this->_getArticle()->setProperty(''Artikelbewertung'', ''sterne'', $this->getSterne()+$iSterne);\n       }\n\n       public function getSterne() {\n          return $this->_getArticle()->getProperty(''Artikelbewertung'', ''sterne'');\n       }\n\n       private function _setBewertungen() {\n          $this->_getArticle()->setProperty(''Artikelbewertung'', ''bewertungen'', $this->getBewertungen()+1);\n       }\n\n       public function getBewertungen() {\n          return $this->_getArticle()->getProperty(''Artikelbewertung'', ''bewertungen'');		  \n       }\n\n       private function _setGesamtbewertung() {\n          $this->_getArticle()->setProperty(''Artikelbewertung'', ''gesamtbewertung'', round(bcdiv($this->getSterne(), $this->getBewertungen(), 2), 0));\n       }\n\n       public function getGesamtbewertung() {\n          $iGesamtbewertung = $this->_getArticle()->getProperty(''Artikelbewertung'', ''gesamtbewertung'');\n          \n          return ($iGesamtbewertung >= 1 ? $iGesamtbewertung : 0);\n       }\n\n       private function _setMaxSterne($iMaxSterne) {\n          $this->_iMaxSterne = $iMaxSterne;\n       }\n\n       public function getMaxSterne() {\n          return $this->_iMaxSterne;\n       }\n\n       private function _checkSperre() {\n          // Bewerter dieses Artikels auslesen\n          $aBewerter = $this->_getBewerter();\n\n          return (bcadd($aBewerter[$this->_getRemoteAddr()], $this->_getSperrzeit()) < $this->_getTimestamp() ? true : false);\n       }\n	   \n	   public function getcheckSperre() {\n          $aBewerter = $this->_getBewerter();\n          return (bcadd($aBewerter[$this->_getRemoteAddr()], $this->_getSperrzeit()) < $this->_getTimestamp() ? true : false);\n       }\n\n       private function _checkSterne($iSterne) {\n          return ($iSterne > 0 && $iSterne <= $this->getMaxSterne() ? true : false);\n       }\n\n       public function rate($iSterne) {\n          // überprüfen ob ein zugelassener Wert übergeben wurde\n          if ($this->_checkSterne($iSterne)) {\n             // überprüfen ob die letzte Wertung mehr als x Sekunden her ist\n             if ($this->_checkSperre()) {\n\n                $this->_setBewerter();\n                $this->_setSterne($iSterne);\n                $this->_setBewertungen();\n                $this->_setGesamtbewertung();\n\n             }\n          }\n       }\n    }\n\n$Showroomoption="CMS_VALUE[9922]";\nif ($Showroomoption == "auswahl") {\n\n    /***************\n    ARTIKEL-BEWERTUNG\n    ****************/\n\n    // Configuration\n    $iSperrzeit = 24*60*60; /* 1 Tag */\n    // $iSperrzeit = 60; /* 1 Minute */\n    $iMaxSterne = 5;\n\n    // neues Objekte zur Templateverwendung initialisieren\n    (!isset($oTemplate) ? $oTemplate = new Template() : $oTemplate->reset());\n\n    // Objekt zur Artikelbewertung initialisieren\n    $oArtikelbewertung = new wtArtikelbewertung($iSperrzeit, $iMaxSterne);\n\n    // dem Artikel eine Bewertung geben\n    // Abfragen ob von der eigenen Webseite\n    if (strpos($_SERVER[''HTTP_REFERER''], ''ferien-motzen.de'') !== false) {\n        $oArtikelbewertung->rate(Contenido_Security::toInteger($_GET[''article_rate'']));\n    }\n\n    // Sterne ausgeben\n    for ($i = 1; $i <= $oArtikelbewertung->getMaxSterne(); $i++) {\n       $oTemplate->set(''d'', ''bewertungslink'',    Contenido_Url::getInstance()->build(array(''idart'' => $idart, ''lang'' => $lang, ''client'' => $client, ''article_rate'' => $i)));\n       $oTemplate->set(''d'', ''empty_full'',       ($i <= $oArtikelbewertung->getGesamtbewertung() ? ''full'' : ''empty''));\n       $oTemplate->next();\n    }\n	\n	// Anzahl der Stimmen\n	$iBewertungen = $oArtikelbewertung->getBewertungen();\n    $oTemplate->set(''s'', ''bewerteranzahl'',          $iBewertungen);\n	\n	// Namen ausgeben\n	$headlinedesartikel = "CMS_HTMLHEAD[1]";	\n	$headlinedesartikel = capiStrTrimAfterWord($headlinedesartikel, 52).'''';\n	$oTemplate->set(''s'', ''kategorie'', strip_tags($headlinedesartikel));\n	// $keinname = "";\n	// $oTemplate->set(''s'', ''kategorie'', $keinname);\n\n    // Anzahl der maximalen Sterneanzahl ans Template übergeben\n    $oTemplate->set(''s'', ''maxsterne'',          $iMaxSterne);\n\n    // Bewertung des Artikels an das Template übergeben\n    $oTemplate->set(''s'', ''gesamtbewertung'',    $oArtikelbewertung->getGesamtbewertung());\n	\n	// Überprüfung ob IP-Sperre aktiv ist\n	$ipsperreaktiv = $oArtikelbewertung->getcheckSperre();\n	// echo $sperresache;	\n	if ($ipsperreaktiv == "1") {\n	// echo "keine Speere";\n	// Template zum Bewerten\n    $oTemplate->generate(''templates/bewertung.html'', false, true);\n	} else {\n	// echo "Speere aktiv";\n	// Template - Bewertung nicht möglich\n    $oTemplate->generate(''templates/bewertung-empty.html'', false, true);\n	}\n	\n } else {};\n\n?>', '', '0', '', '', '48a365b4ce1e322a55ae9017f3daf0c0', '2017-07-14 13:35:32', '2017-08-11 12:41:45');